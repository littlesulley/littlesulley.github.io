<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/radahn-medium.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/radahn-medium.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/radahn-small.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-2oysa9iikh">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,300italic,400,400italic,700,700italic%7CNoto+Serif+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/black/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"sulley.cc","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":3,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="本文是《Real-Time Cameras: A Guide for Game Designers and Developers》的阅读笔记，放在此备份供参阅。">
<meta property="og:type" content="article">
<meta property="og:title" content="《Real-Time Cameras》笔记">
<meta property="og:url" content="http://sulley.cc/2022/05/05/%E3%80%8AReal-Time%20Cameras%E3%80%8B%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Sulley">
<meta property="og:description" content="本文是《Real-Time Cameras: A Guide for Game Designers and Developers》的阅读笔记，放在此备份供参阅。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://sulley.cc/images/realtime_cameras/1-1.png">
<meta property="og:image" content="http://sulley.cc/images/realtime_cameras/1-2.png">
<meta property="og:image" content="http://sulley.cc/images/realtime_cameras/2-1.png">
<meta property="og:image" content="http://sulley.cc/images/realtime_cameras/3-1.png">
<meta property="article:published_time" content="2022-05-05T13:40:19.000Z">
<meta property="article:modified_time" content="2022-05-19T15:53:03.801Z">
<meta property="article:author" content="Sulley">
<meta property="article:tag" content="随笔">
<meta property="article:tag" content="游戏">
<meta property="article:tag" content="相机">
<meta property="article:tag" content="设计">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://sulley.cc/images/realtime_cameras/1-1.png">


<link rel="canonical" href="http://sulley.cc/2022/05/05/%E3%80%8AReal-Time%20Cameras%E3%80%8B%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://sulley.cc/2022/05/05/%E3%80%8AReal-Time%20Cameras%E3%80%8B%E7%AC%94%E8%AE%B0/","path":"2022/05/05/《Real-Time Cameras》笔记/","title":"《Real-Time Cameras》笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>《Real-Time Cameras》笔记 | Sulley</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Sulley</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Never Betray Yourself.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">15</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">8</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">18</span></a></li>
        
            
  <li class="menu-item menu-item-相册"><a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>相册</a></li>


      
        <li class="menu-item menu-item-资源"><a href="/resources/" rel="section"><i class="fa fa-book fa-fw"></i>资源</a></li>
        <li class="menu-item menu-item-留言"><a href="/comments/" rel="section"><i class="fa fa-comment fa-fw"></i>留言</a></li>
        <li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#part-1-core-concepts"><span class="nav-number">1.</span> <span class="nav-text">Part 1: Core Concepts</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-1-game-overview"><span class="nav-number">1.1.</span> <span class="nav-text">Chapter 1: Game Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-2-camera-fundamentals"><span class="nav-number">1.2.</span> <span class="nav-text">Chapter 2: Camera
Fundamentals</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#real-world-cameras"><span class="nav-number">1.2.1.</span> <span class="nav-text">Real-World Cameras</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#camera-presentation-styles"><span class="nav-number">1.2.2.</span> <span class="nav-text">Camera Presentation Styles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#camera-behaviors"><span class="nav-number">1.2.3.</span> <span class="nav-text">Camera Behaviors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#view-generation"><span class="nav-number">1.2.4.</span> <span class="nav-text">View Generation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#player-controls"><span class="nav-number">1.2.5.</span> <span class="nav-text">Player Controls</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-3-cinematography"><span class="nav-number">1.3.</span> <span class="nav-text">Chapter 3: Cinematography</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nomenclature"><span class="nav-number">1.3.1.</span> <span class="nav-text">Nomenclature</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dynamically-generated-moviesreplay-cameras"><span class="nav-number">1.3.2.</span> <span class="nav-text">Dynamically
Generated Movies&#x2F;Replay Cameras</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scripting"><span class="nav-number">1.3.3.</span> <span class="nav-text">Scripting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#editing"><span class="nav-number">1.3.4.</span> <span class="nav-text">Editing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tools"><span class="nav-number">1.3.5.</span> <span class="nav-text">Tools</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#part-2-design-principles"><span class="nav-number">2.</span> <span class="nav-text">Part 2: Design Principles</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-4-camera-design"><span class="nav-number">2.1.</span> <span class="nav-text">Chapter 4: Camera Design</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#interactive-2d-camera-systems"><span class="nav-number">2.1.1.</span> <span class="nav-text">Interactive 2D Camera
Systems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cinematic-2d-camera-systems"><span class="nav-number">2.1.2.</span> <span class="nav-text">Cinematic 2D Camera Systems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#interactive-3d-camera-systems"><span class="nav-number">2.1.3.</span> <span class="nav-text">Interactive 3D Camera
Systems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cinematic-3d-camera-systems"><span class="nav-number">2.1.4.</span> <span class="nav-text">Cinematic 3D Camera Systems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#d-camera-systems"><span class="nav-number">2.1.5.</span> <span class="nav-text">2.5D Camera Systems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#display-devices"><span class="nav-number">2.1.6.</span> <span class="nav-text">Display Devices</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#camera-design-process"><span class="nav-number">2.1.7.</span> <span class="nav-text">Camera Design process</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#camera-design-guidelines"><span class="nav-number">2.1.8.</span> <span class="nav-text">Camera Design Guidelines</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-5-camera-solutions"><span class="nav-number">2.2.</span> <span class="nav-text">Chapter 5: Camera Solutions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#game-genre-camera-solutions"><span class="nav-number">2.2.1.</span> <span class="nav-text">Game Genre Camera Solutions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#multi-player-camera-solutions"><span class="nav-number">2.2.2.</span> <span class="nav-text">Multi-Player Camera
Solutions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gamera-scripting"><span class="nav-number">2.3.</span> <span class="nav-text">Gamera Scripting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#what-is-meant-by-scripting"><span class="nav-number">2.3.1.</span> <span class="nav-text">What is Meant by Scripting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#types-of-scripting"><span class="nav-number">2.3.2.</span> <span class="nav-text">Types of Scripting</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#scripting-languages"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">Scripting languages</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-messaging"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">Event messaging</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#script-objects"><span class="nav-number">2.3.3.</span> <span class="nav-text">Script Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scriptable-game-hints"><span class="nav-number">2.3.4.</span> <span class="nav-text">Scriptable game hints</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#camera-scripting"><span class="nav-number">2.3.5.</span> <span class="nav-text">Camera Scripting</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#camera-scripting-methods"><span class="nav-number">2.3.5.1.</span> <span class="nav-text">Camera scripting methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dcamera-control"><span class="nav-number">2.3.5.2.</span> <span class="nav-text">DCamera control</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scripting-tools"><span class="nav-number">2.3.6.</span> <span class="nav-text">Scripting Tools</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#world-editor-support"><span class="nav-number">2.3.6.1.</span> <span class="nav-text">World editor support</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#communication-between-target-platform-and-development-pc"><span class="nav-number">2.3.6.2.</span> <span class="nav-text">Communication
between target platform and development PC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#messagingevent-logging"><span class="nav-number">2.3.6.3.</span> <span class="nav-text">Messaging&#x2F;event logging</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#object-properties-debugging"><span class="nav-number">2.3.6.4.</span> <span class="nav-text">Object properties debugging</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#replay"><span class="nav-number">2.3.6.5.</span> <span class="nav-text">Replay</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#console-window"><span class="nav-number">2.3.6.6.</span> <span class="nav-text">Console window</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scripting-debugging"><span class="nav-number">2.3.7.</span> <span class="nav-text">Scripting Debugging</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#part-3-camera-engineering"><span class="nav-number">3.</span> <span class="nav-text">Part 3: Camera Engineering</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-7-position-and-orientation"><span class="nav-number">3.1.</span> <span class="nav-text">Chapter 7: Position and
Orientation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#coordinate-schemes"><span class="nav-number">3.1.1.</span> <span class="nav-text">Coordinate Schemes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#desired-position"><span class="nav-number">3.1.2.</span> <span class="nav-text">Desired Position</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#first-person-camera-positioning"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">First person camera
positioning</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#third-person-camera-positioning"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">Third person camera
positioning</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#desired-position-determination-methods"><span class="nav-number">3.1.3.</span> <span class="nav-text">Desired Position
Determination Methods</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#stationary"><span class="nav-number">3.1.3.1.</span> <span class="nav-text">Stationary</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#slavedtracking"><span class="nav-number">3.1.3.2.</span> <span class="nav-text">Slaved&#x2F;tracking</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#path"><span class="nav-number">3.1.3.3.</span> <span class="nav-text">Path</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#surface-constrained"><span class="nav-number">3.1.3.4.</span> <span class="nav-text">Surface constrained</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#volume-constrained"><span class="nav-number">3.1.3.5.</span> <span class="nav-text">Volume constrained</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#framing"><span class="nav-number">3.1.3.6.</span> <span class="nav-text">Framing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#object-framing-relative"><span class="nav-number">3.1.3.7.</span> <span class="nav-text">Object-framing relative</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#axis-rotationalspindle"><span class="nav-number">3.1.3.8.</span> <span class="nav-text">Axis rotational&#x2F;spindle</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#common-position-problems"><span class="nav-number">3.1.4.</span> <span class="nav-text">Common Position Problems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#orientation"><span class="nav-number">3.1.5.</span> <span class="nav-text">Orientation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#desired-orientation-determination-methods"><span class="nav-number">3.1.6.</span> <span class="nav-text">Desired Orientation
Determination Methods</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#constant-orientation"><span class="nav-number">3.1.6.1.</span> <span class="nav-text">Constant orientation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tracking-a-target-object-or-position"><span class="nav-number">3.1.6.2.</span> <span class="nav-text">Tracking a target object
or position</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#look-at-offset"><span class="nav-number">3.1.6.3.</span> <span class="nav-text">Look-at offset</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#locked-look-at-position"><span class="nav-number">3.1.6.4.</span> <span class="nav-text">Locked look-at position</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#target-object-position-prediction"><span class="nav-number">3.1.6.5.</span> <span class="nav-text">Target object position
prediction</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#object-framing"><span class="nav-number">3.1.6.6.</span> <span class="nav-text">Object framing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#idle-wandering"><span class="nav-number">3.1.6.7.</span> <span class="nav-text">Idle wandering</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#automated-orientation-control"><span class="nav-number">3.1.6.8.</span> <span class="nav-text">Automated orientation
control</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reorientation-methods"><span class="nav-number">3.1.7.</span> <span class="nav-text">Reorientation Methods</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#applying-rotations"><span class="nav-number">3.1.7.1.</span> <span class="nav-text">Applying rotations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reorientation-lag"><span class="nav-number">3.1.7.2.</span> <span class="nav-text">Reorientation lag</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#offsets"><span class="nav-number">3.1.7.3.</span> <span class="nav-text">Offsets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#smoothing-and-damping"><span class="nav-number">3.1.7.4.</span> <span class="nav-text">Smoothing and damping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#springs-and-pid-controllers"><span class="nav-number">3.1.7.5.</span> <span class="nav-text">Springs and PID controllers</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#free-look"><span class="nav-number">3.1.8.</span> <span class="nav-text">Free-Look</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#first-person-free-look"><span class="nav-number">3.1.8.1.</span> <span class="nav-text">First person free-look</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#third-person-free-look"><span class="nav-number">3.1.8.2.</span> <span class="nav-text">Third person free-look</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#free-look-orientation-determination"><span class="nav-number">3.1.8.3.</span> <span class="nav-text">Free-look orientation
determination</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#common-orientation-problems"><span class="nav-number">3.1.8.4.</span> <span class="nav-text">Common orientation problems</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-8-navigation-and-occulusion"><span class="nav-number">3.2.</span> <span class="nav-text">Chapter 8: Navigation and
Occulusion</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-9-motion-and-collision"><span class="nav-number">3.3.</span> <span class="nav-text">Chapter 9: Motion and
Collision</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-10-camera-mathematics"><span class="nav-number">3.4.</span> <span class="nav-text">Chapter 10: Camera
Mathematics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-11-implementation"><span class="nav-number">3.5.</span> <span class="nav-text">Chapter 11: Implementation</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sulley"
      src="/images/radahn-avatar.png">
  <p class="site-author-name" itemprop="name">Sulley</p>
  <div class="site-description" itemprop="description">珍惜眼前人</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/littlesulley" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;littlesulley" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qinghonghan97@gmail.com" title="E-Mail → mailto:qinghonghan97@gmail.com" rel="noopener" target="_blank"><i class="fa-solid fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/1631723" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;1631723" rel="noopener" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/id/beingaway/" title="Steam → https:&#x2F;&#x2F;steamcommunity.com&#x2F;id&#x2F;beingaway&#x2F;" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i>Steam</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/han-qing-hong-33" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;han-qing-hong-33" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://kungtalon.github.io/" title="https:&#x2F;&#x2F;kungtalon.github.io&#x2F;" rel="noopener" target="_blank">Kungtalon</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kaesenudeln.github.io/" title="https:&#x2F;&#x2F;kaesenudeln.github.io&#x2F;" rel="noopener" target="_blank">Zecx</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://sulley.cc/2022/05/05/%E3%80%8AReal-Time%20Cameras%E3%80%8B%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/radahn-avatar.png">
      <meta itemprop="name" content="Sulley">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sulley">
      <meta itemprop="description" content="珍惜眼前人">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="《Real-Time Cameras》笔记 | Sulley">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          《Real-Time Cameras》笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-05 21:40:19" itemprop="dateCreated datePublished" datetime="2022-05-05T21:40:19+08:00">2022-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-19 23:53:03" itemprop="dateModified" datetime="2022-05-19T23:53:03+08:00">2022-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B8%B8%E6%88%8F-%E6%B8%B8%E6%88%8F%E7%90%86%E8%AE%BA/" itemprop="url" rel="index"><span itemprop="name">游戏 - 游戏理论</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/05/05/%E3%80%8AReal-Time%20Cameras%E3%80%8B%E7%AC%94%E8%AE%B0/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/05/05/《Real-Time Cameras》笔记/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>22k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>20 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>本文是《Real-Time Cameras: A Guide for Game Designers and
Developers》的阅读笔记，放在此备份供参阅。</p>
<span id="more"></span>
<h1 id="part-1-core-concepts">Part 1: Core Concepts</h1>
<ul>
<li>第一章：介绍了游戏应用与其中的相机系统。</li>
<li>第二章：讲述游戏相机的基础概念与发展。</li>
<li>第三章：介绍电影摄影的基础知识与应用。</li>
</ul>
<h2 id="chapter-1-game-overview">Chapter 1: Game Overview</h2>
<p>一个典型的游戏引擎（Game Engine）应当包括：</p>
<ul>
<li>资源管理系统（Resource Management）</li>
<li>玩家控制（Player Control）</li>
<li>物理模拟（Physics Simulation）</li>
<li>游戏对象逻辑（Game Object Logic）</li>
<li>图形用户界面（Graphical User Interface）</li>
<li>相机与视口管理（Camera and Viewport Management）</li>
<li>网络交流（Network Communication）</li>
<li>人工智能（AI）</li>
<li>游戏事件管理（Game Event Management）</li>
<li>渲染（Rendering）</li>
<li>对象间交流（Inter-Object Communication）<br />
</li>
<li>音频（Audio）</li>
<li>任务管理（Task Management）</li>
<li>……</li>
</ul>
<figure>
<img data-src="/images/realtime_cameras/1-1.png"
alt="游戏各系统之间的联系。" />
<figcaption aria-hidden="true">游戏各系统之间的联系。</figcaption>
</figure>
<p>游戏的每个系统都有相对固定的更新顺序，如下图所示：</p>
<figure>
<img data-src="/images/realtime_cameras/1-2.png"
alt="游戏各系统的更新顺序。" />
<figcaption aria-hidden="true">游戏各系统的更新顺序。</figcaption>
</figure>
<p>对于每个步骤的介绍如下：</p>
<ul>
<li><strong>Input</strong>：通常是每帧更新一次，但一些游戏也会每帧更新若干次，从而精准反应玩家输入。</li>
<li><strong>Think</strong>：大部分游戏逻辑得到更新，包括玩家输入、AI、游戏事件生成等。</li>
<li><strong>Move</strong>：更新物理模拟、碰撞检测等内容。</li>
<li><strong>Messaging</strong>：用于在游戏对象、游戏系统之间传递信息，比如新游戏对象的激活、开门、敌人死亡、资源加载完成、动画事件、碰撞等等。Messaging并不是一定会在Update
Loop中出现，可能会在消息发出的瞬间被处理，或者延迟处理。Messaging系统有利于不同系统之间的解耦，简化游戏录像逻辑。Messaging本质上是一种保证不同时间点游戏事件同步的技术。</li>
<li><strong>Camera</strong>：主要包含以下步骤：
<ul>
<li>移除无用的camera</li>
<li>激活需要的camera</li>
<li>决定哪个camera用于渲染</li>
<li>更新当前激活的相机</li>
<li>更新主相机</li>
<li>基于主相机更新玩家control reference frame</li>
<li>构建transformation matrices用于渲染，包括特效如shaking, FOV等</li>
</ul></li>
<li><strong>Post-Camera</strong>：更新依赖于相机的物体</li>
<li><strong>Render</strong>：有时候一个camera view也会被用于另一个camera
view的生成过程中</li>
</ul>
<p><strong>对于相机而言，Occam's
Razor法则适用：最简单的相机解决方案通常是最好的。</strong></p>
<p>相机系统的作用包括：</p>
<ul>
<li>管理活跃相机，保证其逻辑正常</li>
<li>控制相机增删</li>
<li>支持相机参数动态调整</li>
<li>为玩家操控提供参考帧（reference frames）</li>
<li>处理所有非交互式电影片段</li>
<li>管理并更新视口</li>
<li>获取frustum信息以展示view</li>
<li>提供可选的debug能力</li>
</ul>
<p>角色控制与角色移动之间的关系被称为<strong>控制参考帧（control
reference frame）</strong>。</p>
<h2 id="chapter-2-camera-fundamentals">Chapter 2: Camera
Fundamentals</h2>
<h3 id="real-world-cameras">Real-World Cameras</h3>
<p>真实世界的相机大概包含以下关键要素：</p>
<ul>
<li>Lens type</li>
<li>Capture method</li>
<li>Film stock</li>
<li>Capture rate</li>
<li>Exposure of film</li>
<li>Projection method</li>
<li>Aspect ratio</li>
</ul>
<p>真实世界相机的一些特点：</p>
<ul>
<li>缺乏交互性</li>
<li>预先决定的机位</li>
<li>相机镜头</li>
<li>场景切换</li>
<li>胶片曝光</li>
<li>后处理特效</li>
</ul>
<p>游戏相机的一些特点：</p>
<ul>
<li>模拟真实世界相机的功能</li>
<li>不需要相机实体</li>
<li>动态变化</li>
<li>允许游戏世界的不同投影</li>
<li>可变的光照与渲染</li>
<li>更多样的转场</li>
<li>允许特殊效果</li>
</ul>
<p>一些专有名词：</p>
<ul>
<li>Game system:
管理相机、应用相机、控制相机行为、生成用于渲染的信息、控制参考帧</li>
<li>Game camera: 抽象的游戏实体</li>
<li>Presentation style: 指将游戏世界投影到屏幕空间的方法</li>
<li>Camera behavior: 一人称/三人称相机，影院式/交互式相机</li>
<li>Look-at position: 相机朝向的位置</li>
<li>Desired position: 相机移动的位置</li>
<li>Orientation: 相机朝向</li>
<li>Desired orientation: 相机的目标朝向</li>
<li>Rotation: 朝向的变化量</li>
<li>View frustum: 游戏世界的可视空间</li>
<li>Viewport: 呈现在显示设备上的一种数据结构</li>
<li>Field of view: View frustum的上下/左右边界的夹角</li>
<li>Aspect ratio: 长宽比，对于standard definition television
(SDTV)来说，是4:3，对high-definition television
(HDTV)是16:9。对电影投影中使用最多的是1.85 (CinemaScope)和2.35
(anamorphic)</li>
<li>Refresh or frame rate: 刷新率</li>
<li>Refresh and motion blur:
刷新模糊指显示设备刷新率不能与计算机的输出同步，运动模糊是因为物体运动快于曝光时间</li>
<li>Display tearing: 显示撕裂</li>
<li>Player character： 玩家在游戏中控制的物体</li>
<li>Target object: 被看向的物体</li>
<li>Interpolation: 插值</li>
<li>Projection: 投影</li>
<li>Parallax: 视差</li>
<li>Transitions:
转场，包括过程化转换、插值、瞬时切换、清除、过渡等等</li>
<li>Camera constraints: 相机约束</li>
<li>Motion constraints:
运动约束，如距离、相对位置、路径、速度、加速度等等</li>
<li>Orientation constraints: 通常用于第一人称相机</li>
</ul>
<h3 id="camera-presentation-styles">Camera Presentation Styles</h3>
<p>Presentation style
通常被划分为正交（2D）或者透视（3D）渲染，有时也会使用2.5D</p>
<h3 id="camera-behaviors">Camera Behaviors</h3>
<p>主要有三种相机行为：</p>
<ul>
<li>Cinematic cameras:
非交互的、玩家不可控的相机，包括cutscene和real-time cinematic
sequences</li>
<li>First person cameras:
视野比TP游戏小，使玩家难以全面捕捉空间与环境信息，跳跃也更加困难。在实现FP相机时，建议把相机与任务的头部分开，同时使相机的朝向独立于玩家的朝向</li>
<li>Third person cameras:
允许更大的视野，适用于环境导向型游戏，但存在world navigation与collision
avoidance两个问题</li>
</ul>
<p>此外，相机也可以分为predictive和reactive两类： - Reactive:
根据游戏对象的变化而变化 - Predictive:
根据当前游戏物体预测最佳的相机位置和朝向</p>
<p>Path finding solutions: -
全局路径搜索：搜索环境中的一条路径，能够保持美学质量 -
局部路径搜索：以某种具体的物体类型为核心进行搜索 -
基于目标的搜索：在各种约束下搜索路径</p>
<h3 id="view-generation">View Generation</h3>
<p>视图生成步骤：</p>
<ul>
<li>游戏中每个活跃的物体更新内部状态</li>
<li>相机更新位置、朝向等信息</li>
<li>对游戏中待生成的每个view:
<ul>
<li>决定相机的位置和朝向</li>
<li>决定显示设备上的viewport</li>
<li>决定游戏世界中的frustum</li>
<li>给定frustum，决定哪些物体被剔除</li>
<li>对每个待渲染的物体：
<ul>
<li>变换物体</li>
<li>应用光照着色</li>
<li>2D投影</li>
<li>光栅化</li>
</ul></li>
</ul></li>
</ul>
<figure>
<img data-src="/images/realtime_cameras/2-1.png" alt="简化的渲染流程。" />
<figcaption aria-hidden="true">简化的渲染流程。</figcaption>
</figure>
<p>在上述步骤中，与相机系统直接相关的有：view frustum, view
transform和projection transform</p>
<h3 id="player-controls">Player Controls</h3>
<p>A control reference frame refers to a relationship between changes to
the controller input and how it affects movement or other aspects of
player control.</p>
<p>在FP游戏中，control reference
frame直接对应了玩家角色面朝的方向，且通常只能绕up
axis旋转。在TP游戏中，control reference
frame基于相机与玩家的相对位置。</p>
<p>Control reference frame需要始终反应<strong>玩家的意图</strong>！</p>
<h2 id="chapter-3-cinematography">Chapter 3: Cinematography</h2>
<h3 id="nomenclature">Nomenclature</h3>
<p>电影学中的一些专有名词：</p>
<ul>
<li>Dolly: 指平行于地面的移动，dollying in是向前推进，dollying
out是向后推进，crab left是向左移动，crab right是向右移动</li>
<li>Pan/Yaw: 绕着camera up轴的旋转</li>
<li>Tilt/Pitch: 绕着camera right轴的旋转</li>
<li>Tracking: 跟着物体移动</li>
<li>Depth of field: 景深</li>
<li>Color fade: 颜色渐变</li>
<li>Lens flare: 镜头眩光</li>
<li>Cut-away shot: 切换到另一个镜头用于强调原场景中的某个元素</li>
<li>Insert shot: 切换到场景中的细节部分，比如人物特写</li>
<li>Jump cut: 瞬间切换</li>
<li>180 degree rule/line of action: 二人镜头应该让相机保持在同一侧</li>
<li>Point of view shot: 第一视角镜头</li>
<li>Crane shot: 第三人称视角</li>
<li>Reaction shot: 拍摄人物反应的镜头</li>
<li>Reverse shot: 与前一个镜头角度相反，但仍遵循180度法则</li>
<li>30 degree rule: 当使用jump
cut时，新镜头与上个镜头的角度差应该大于30度，否则会让观众认为是场景的物体发生了移动而非相机</li>
<li>Forced perspective:
强制透视指一系列技术让观众产生错误的视觉效果，如大小、位置关系</li>
</ul>
<h3 id="dynamically-generated-moviesreplay-cameras">Dynamically
Generated Movies/Replay Cameras</h3>
<p>为了实现回放，可以记录初始游戏状态和玩家操作，然后模拟行为。一些回放系统还支持观测者视角。</p>
<p>有三种形式的回放相机：reproduction, scripted, dynamically
generated:</p>
<ul>
<li>Reproduction cameras/keyframed cameras:
在固定的时间间隔记录位置和朝向信息，实现简单但可能依赖于其他非keyframed游戏事件</li>
<li>Scripted cameras:
是可交互与预定义的结合。Replay相机的位置可以采用下述的形式：
<ul>
<li>Discrete camera behaviors: 此类相机perform jump
cuts或者预定义相机位置之间的插值</li>
<li>Path-based motion: 使用设计师预定义的相机路径</li>
<li>Slaved motion: 根据特定物体设置相机位置
类似地，相机的朝向（甚至FOV）可以采用如下的形式：</li>
<li>Fixed orientations: 固定朝向</li>
<li>Pre-defined orientations: 预定义朝向</li>
<li>Object tracking: 跟踪游戏物体调整朝向</li>
<li>Object framing:
保证游戏物体保持与显示设备一致的相对距离，此时物体的显示大小可以通过改变FOV调整</li>
</ul></li>
<li>Dynamically generated cameras:
在回放的时候动态生成相机，如死亡视角、高亮操作等等
<ul>
<li>死亡视角相机：可以通过一个围绕角色的stationary相机实现，或者使用一些预定义的相机位置/朝向</li>
<li>重生相机：当玩家进入/重进游戏时播放的相机</li>
</ul></li>
</ul>
<p>一些常用的相机特效：</p>
<ul>
<li>Reorientation changes:
引入朝向误差，模拟人类持相机的行为，但要注意摇晃的幅度</li>
<li>Camera shake:
相机抖动通常在渲染过程中实现而非游戏世界中，因为这不会改变相机的实际位置，注意在第三人称游戏中应当控制相机抖动的幅度和频率</li>
<li>Roll: 用于营造失控的感觉，比如用在赛车游戏中</li>
<li>FOV/DOF: 注意DOF不要频繁使用</li>
</ul>
<h3 id="scripting">Scripting</h3>
<p>Scripting通常指设计师手动指定相机的位置和朝向，要么在编辑器中进行编辑，要么使用Maya等工具编辑后直接导入</p>
<p>一个典型的scripting system应当包括：</p>
<ul>
<li>调整相机位置和朝向</li>
<li>转场</li>
<li>相机插值</li>
<li>FOV变化</li>
</ul>
<p>Scripting system最好还支持编辑时预览，尽管非常困难</p>
<h3 id="editing">Editing</h3>
<p>编辑就是把所有的shot重新组织、拼接的过程，主要包含以下内容：</p>
<ul>
<li>Shot selection: 镜头选择</li>
<li>Framing/composition:
电影业通常对镜头的摆放有非常具体的标准以达到特定的情感效果，即使镜头离物体的距离固定，物体在屏幕中的位置也会极大影响呈现的效果，通常遵循三分法则（rule
of thirds）</li>
<li>Transitions: 有几种常见的转场方式：
<ul>
<li>Jump cut: 遵循30度法则</li>
<li>Cross fade or dissolve: 此类转场可以降低渲染性能要求</li>
<li>Iris transition: 以屏幕一点为圆心向四周展开</li>
<li>Wipe(s): 擦拭转场</li>
<li>Viewport transitions: 视口转场</li>
</ul></li>
</ul>
<figure>
<img data-src="/images/realtime_cameras/3-1.png"
alt="Rule of thirds示意。" />
<figcaption aria-hidden="true">Rule of thirds示意。</figcaption>
</figure>
<h3 id="tools">Tools</h3>
<p>如果电影镜头使用游戏引擎进行渲染，即用常规游戏环境制作镜头，则最好让编辑器支持直接控制cinematic
sequences，包括：</p>
<ul>
<li>直接对相机位置和朝向的控制</li>
<li>通过另一个物体控制相机</li>
<li>控制相机之间变化</li>
<li>通过相机触发游戏事件</li>
<li>镜头的转场</li>
<li>控制FOV</li>
<li>即时预览</li>
<li>额外的编辑和debug工具</li>
</ul>
<p>上述属性都可以通过一条曲线完成（类似Unity），横坐标是elapsed
time，纵坐标是具体值</p>
<h1 id="part-2-design-principles">Part 2: Design Principles</h1>
<h2 id="chapter-4-camera-design">Chapter 4: Camera Design</h2>
<h3 id="interactive-2d-camera-systems">Interactive 2D Camera
Systems</h3>
<p>2D游戏通常使用tile
map，每个tile都是一个小图片，且使用hash存储，因此极大节省内存</p>
<p>2D相机的主要功能之一是让角色一直位于屏幕可视范围，比如可以使用scrolling，即让背景做相对运动。下面是一些常见的scrolling类型：</p>
<ul>
<li>Continuous: 背景的scrolling随着游戏连续进行</li>
<li>Character-relative: 相机的运动与角色的运动同步</li>
<li>Directional lag: 期望的相机位置基于角色运动的方向</li>
<li>Burst: 期望的相机位置只有当角色到达某个位置或距离时才变化</li>
<li>Screen-relative: 只有在角色超出预定义的边界时相机才开始移动</li>
<li>Region-based: 当角色超过相对于世界的边界时相机才开始移动</li>
</ul>
<p>有时候相机的位置要独立于角色位置。对共用一个viewport的多人游戏来说，所有角色的位置共同决定了相机的位置。解决方案：</p>
<ul>
<li>允许相机zoom out</li>
<li>限制玩家移动</li>
<li>分屏</li>
<li>允许玩家在屏幕外移动</li>
<li>传送玩家</li>
</ul>
<h3 id="cinematic-2d-camera-systems">Cinematic 2D Camera Systems</h3>
<p>2D cinamatic camera system的一些典型特征包括：</p>
<ul>
<li>Viewport panning control: 控制运动路径</li>
<li>Zoom in/out: 放大缩小</li>
<li>Object tracking: 目标跟踪</li>
<li>Keep an object within screen bounds or other arbitrary
viewport-based constraint: 带有限制的移动</li>
</ul>
<h3 id="interactive-3d-camera-systems">Interactive 3D Camera
Systems</h3>
<p>交互式3D相机系统的难点在于提供一个上下文合适的视角，包括艺术性与游戏性，特征包括：</p>
<ul>
<li>渲染投影类型（透视、正交）</li>
<li>决定相机期望位置（navigation）</li>
<li>相机移动的方式</li>
<li>决定相机期望朝向</li>
<li>相机旋转的方式</li>
<li>相机其他属性的动态改变（FOV, etc）</li>
<li>相机插值</li>
<li>Fail-safe handling</li>
<li>多视口/分屏</li>
</ul>
<h3 id="cinematic-3d-camera-systems">Cinematic 3D Camera Systems</h3>
<p>当设计3D cinematic camera system的时候有几个有用的建议：</p>
<ul>
<li>Duplicate controls and functionality from modeling packages:
复用现有建模包中的功能，让艺术家能够用得舒服、更有效率</li>
<li>Develop a common terminology: 尽可能用标准的专业术语</li>
<li>Consider pre-rendering cinematic sequences:
用游戏引擎渲染sequence</li>
<li>Distinguish non-interactive sequences from regular game play:
要让玩家意识到在播放cinematic
sequences时不能再操纵角色了，比如调整aspect ratio</li>
<li>Allow an early out after viewing scene once:
让观众有机会跳过cinematic sequence</li>
</ul>
<h3 id="d-camera-systems">2.5D Camera Systems</h3>
<p>2.5D相机系统有自身的优势，比如让游戏玩家更容易理解和接受游戏</p>
<h3 id="display-devices">Display Devices</h3>
<p>让游戏分辨率适应显示分辨率的方法：</p>
<ul>
<li>Resize: 通过render buffer和viewport匹配显示设备的分辨率</li>
<li>Pan and scan: 裁剪</li>
<li>Stretch: 伸缩</li>
</ul>
<h3 id="camera-design-process">Camera Design process</h3>
<p>首先，游戏的整体体验/玩法需要制定下来，然后再制定相机的宏观设计框架。相机设计的总体流程是：</p>
<ul>
<li>Examine high-level design goals:
明确在游戏的不同部分相机有何相同之处，是否需要单个representation
style，玩家有怎样的体验</li>
<li>Evaluate player character abilities:
玩家怎么移动、怎么与环境交互</li>
<li>Determine scope of environments:
游戏场景是怎样的，要提前根据场景做camera prototyping</li>
<li>Define base camera behaviors: 尽快确定相机的基础功能</li>
<li>Determine area-specific requirements: 明确特殊区域</li>
<li>Technical evaluation of cameras:
关注处理器开销、内存开销、脚本能力、Debug能力</li>
</ul>
<p>在相机设计的时候可以问一些问题，这有助于我们更好地设计：</p>
<ul>
<li>Player abilities and controls
<ul>
<li>角色怎么移动的？加速度是什么？是否能跳/飞？</li>
<li>角色的移动能力是否最终确定了？</li>
<li>相机与玩家的关系是怎样的？</li>
<li>是否应该保持与玩家朝向相对固定的朝向？</li>
<li>玩家想要看到什么？</li>
<li>相机应该关注角色还是角色前的某个点？</li>
<li>是否有必须可视的部分？</li>
<li>除了角色之外是否还有其他物体必须可视？</li>
<li>相机的朝向是否需要改变？</li>
<li>玩家角色怎样被控制？</li>
</ul></li>
<li>Environmental concerns: 场景设计应该围绕玩法和相机限制
<ul>
<li>角色在怎样的场景中移动？开放还是封闭，宽敞还是狭窄？</li>
<li>场景是否影响相机的位置和朝向？</li>
<li>相机是否应该被放在场景外？如是，如果在常规玩法中切换？</li>
<li>相机是否会在动态变化的场景中跟随玩家？受到阻挡怎么办？</li>
<li>相机是否应当避免复杂物体？</li>
<li>相机是否应当限制在具体的路径或表面？</li>
<li>哪种presentation style更好？</li>
<li>在场景中相机插值是否还生效？</li>
<li>是否有必要给相机加上特定的碰撞体？</li>
</ul></li>
<li>Technical concerns
<ul>
<li>是否有技术限制？包括渲染性能问题等</li>
<li>如果相机会穿透物体，是否支持透明化？</li>
<li>是否需要fail-safes以处理未预料的意外情况，比如关门？</li>
<li>是否允许操纵相机？</li>
<li>场景是否可能遮挡玩家而无法解决？此时场景是否需要进行改变？</li>
<li>是否支持相机插值？如何避免插值间的遮挡？</li>
</ul></li>
</ul>
<p>对于相机的要求、限制应该在项目早期就明确，除非是个别例外，并且要避免在项目开展后大改相机系统。因此，要在项目商讨环节把需求都明确清楚</p>
<p>团队中的camera
designer不仅需要负责相机表现，而且也需要负责大部分情况下的相机解决方案。Lead
camera
designer需要具备美学sense，包括游戏内容的呈现和玩家操作、感知的表现，此外，他还需要推动团队提高认知</p>
<h3 id="camera-design-guidelines">Camera Design Guidelines</h3>
<p>一些相机设计的建议：</p>
<ul>
<li>Attempt to keep the player character in view (3rd person
cameras)</li>
<li>Prevent the camera passing through (or close to) game objects or
physical environmental features</li>
<li>Do not require the player to manipulate the camera simply to play
the game -- unless it is a design requirement</li>
<li>Allow camera manupulation when possible or dictated by game design
requirements</li>
<li>Minimize unintentional camera motion whenever possible</li>
<li>Ensure camera motion is smooth</li>
<li>Limit the reorientation speed of the camera</li>
<li>Limited roll should be allowed in most regular game cameras</li>
<li>Do not allow the camera to pass outside the game world</li>
<li>Retain the camera position with respect to the player when instantly
moving th camera to a new position (3rd person cameras)</li>
<li>Do not focus directly on the player character when it is moving</li>
<li>Retain control reference frame after rapid or instantaneous camera
motion</li>
<li>Avoid enclosed spaces with complex geometry (3rd person
cameras)</li>
</ul>
<h2 id="chapter-5-camera-solutions">Chapter 5: Camera Solutions</h2>
<h3 id="game-genre-camera-solutions">Game Genre Camera Solutions</h3>
<ul>
<li>FPS游戏：目标是提供沉浸式的体验
<ul>
<li>位置：一般与玩家视角同步，但并不是玩家眼睛的位置，因为武器、手臂等必要元素通常不能从眼睛位置可视</li>
<li>朝向：通常与人眼可视方式一样，即free-look，有时候可帮助玩家自动调整垂直方向的朝向</li>
<li>武器或手臂位置：武器与手臂通常可见</li>
<li>与外部观测的不同：多人游戏中其他玩家看到的角色可能不同</li>
<li>与三人称之间的切换：常用jump cut实现切换</li>
<li>Zoom effects</li>
<li>Lack of peripheral vision</li>
<li>Aiming position</li>
<li>Motion sickness</li>
<li>Camera shaking</li>
<li>Cmaera bob: 角色运动时相机的轻微移动</li>
<li>Idle wandering</li>
<li>Scale: 人物在高速移动时往往会scale
尽管相机和人物之间保持相对距离，但是相机也对影响人物移动的因素相当敏感，比如在复杂的地形上，角色可能被垂直提高一段距离，这通常不到一秒钟的时间，但是仍然会对相机产生影响，导致glitch现象，这可以通过增加垂直方向的damping解决，这只有在角色穿越崎岖地表时才生效。注意一人称的damping值要比三人称小</li>
</ul></li>
<li>Character/action
adventure游戏：可以根据角色的技能决定相机的行为，比如大致分为两类：地面与飞行</li>
<li>Stealth: 相机会随着使用物品或武器而变化</li>
<li>3D platform: 主要分为两种形式：free form与pre-determined
<ul>
<li>free-form: 相机的位置与距离可以由玩家操控</li>
<li>pre-determined: 严重依赖于特定的Game
play，同时也要兼顾相机的效果</li>
</ul></li>
<li>RPG: 常用三人称相机</li>
<li>Scrolling</li>
<li>Sports: TV-style presentation may be very desired
<ul>
<li>Single-participants sports: 相机只需要focus on玩家或者单个物体</li>
<li>Two or four-participant sports: 联机or分屏</li>
<li>Team sports: 预留一个control
command标识当前正在控制哪个角色以及哪些角色可以被控制</li>
<li>Court and indoor sports:
对球类运动而言，难点在于追踪及可视球；对桌类运动而言，要提供整个桌面的视野并简化玩家操作</li>
<li>Outdoor sports:
对于场地运动，可以提供能够自主操作的相机；自由运动；轨道运动</li>
<li>Abstract sports</li>
</ul></li>
<li>Racing games:
可提供额外的视角以观测其他人的位置，增大FOV可以制造物体快速通过玩家的感觉</li>
<li>Ground vehicles</li>
<li>RTS</li>
<li>Flight simulation: 一个重要的方面是是否允许相机随着飞机一起roll
<ul>
<li>Realistic flight models: 此类游戏通常从驾驶舱或飞机后侧观察</li>
<li>Non-realistic flight models</li>
<li>Artificial horizon: 可以用仪器监控飞机的pitch或banking</li>
<li>Sensation of motion:
可以用云层或航迹云增强飞机的速度感；航天器可以用小的残骸增强速度感；也可以通过音效、FOV等方式</li>
</ul></li>
<li>Adventure: present a very cinematic experience to the player</li>
<li>Puzzle/party games/board games</li>
<li>Fighting/close combat:
场景一般很简单以便于相机摆放，需要一些相机移动突出角色的操作</li>
</ul>
<h3 id="multi-player-camera-solutions">Multi-Player Camera
Solutions</h3>
<p>多人共享屏幕时，相机设计会有很大难度，有时候可以通过alternate
players解决，但多数情况下并不适用。一般来说可以有两种解决方法：</p>
<ul>
<li>分屏</li>
<li>单屏包含所有玩家</li>
</ul>
<p>下面是对相关技术的介绍：</p>
<ul>
<li>Single-screen techniques: 格斗游戏、合作游戏中常见
<ul>
<li>相机的位置很难确定</li>
<li>通常相机位置固定在一个离游戏世界表面相对的高度，而与玩家移动无关</li>
<li>相机位置可能导致朝向的迅速变化</li>
</ul></li>
<li>Split-screen techniques
<ul>
<li>每个玩家的分屏区域一样大</li>
<li>根据活跃玩家动态分屏</li>
<li>为了提升性能，尽量让所有玩家都处于同一个环境中</li>
<li>尽量减少玩家获取的信息</li>
<li>避免把重要的物体放在设备屏幕边缘</li>
</ul></li>
<li>Transitioning from full-screen to split-screen
<ul>
<li>保持相机相对距离相同</li>
<li>UI元素要重新排布</li>
<li>FOV要根据aspect ratio重新调整</li>
</ul></li>
<li>Transitioning from split-screen to full-screen
<ul>
<li>玩家移动地足够近的时候</li>
<li>UI元素要等transition完成时再移动</li>
<li>相机相对位置保持不变</li>
<li>FOV调整</li>
</ul></li>
</ul>
<h2 id="gamera-scripting">Gamera Scripting</h2>
<h3 id="what-is-meant-by-scripting">What is Meant by Scripting</h3>
<p>定义与控制物体加偶和的过程被称为scripting，在游戏中，指控制游戏事件发生的事件与物体之间的交互。Scripting允许设计师在没有程序员介入的情况下完成迭代</p>
<h3 id="types-of-scripting">Types of Scripting</h3>
<p>我们希望构建一个与游戏类型无关的scripting系统，主要由两个方面组成：scripting
language和event messaging</p>
<h4 id="scripting-languages">Scripting languages</h4>
<ul>
<li>Text-based scripting languages:
包括pre-compiled和interpreted两类</li>
<li>General-purpose programming languages: 编程语言</li>
<li>Custom scripting languages</li>
<li>Finite state machines</li>
<li>Visual scripting languages</li>
</ul>
<h4 id="event-messaging">Event messaging</h4>
<p>Event
messaging要求定义不同物体之间的关系。典型的能够发送消息的事件包括：</p>
<ul>
<li>关卡开始</li>
<li>物体加载</li>
<li>游戏暂停</li>
<li>进入或退出volume</li>
<li>玩家受到伤害</li>
<li>物体到达路径终点</li>
<li>玩家状态改变</li>
</ul>
<p>能够被事件发送的典型消息包括：</p>
<ul>
<li>Start</li>
<li>Stop</li>
<li>Activate object</li>
<li>Delete object</li>
<li>Query state</li>
</ul>
<h3 id="script-objects">Script Objects</h3>
<p>用于定义物体的属性和行为</p>
<h3 id="scriptable-game-hints">Scriptable game hints</h3>
<p>Game hints are script objects that provide one possible type of
runtime mechanism by which designers can override player properties,
game controls or camera properties according to events</p>
<ul>
<li>Camera hints: 改变相机的属性或移动，可以被重载的相机属性包括：
<ul>
<li>相机行为</li>
<li>位置朝向</li>
<li>相对距离</li>
<li>看向点</li>
<li>移动速度</li>
<li>FOV</li>
</ul></li>
<li>Player hints
<ul>
<li>Prevent motion of the player</li>
<li>Relocate player position</li>
<li>Change player movement characteristics</li>
<li>Flags to indicate special kinds of game play</li>
</ul></li>
<li>Control hints
<ul>
<li>Disable specific controls or sets of player controls</li>
<li>Specify the control reference time and the time to interpolate to
that new reference time</li>
</ul></li>
</ul>
<p>很多时候事件需要有先后顺序，一个sequenced event
manager可以用来定义事件的先后顺序。</p>
<h3 id="camera-scripting">Camera Scripting</h3>
<h4 id="camera-scripting-methods">Camera scripting methods</h4>
<ul>
<li>Pre-defined camera scripting</li>
<li>Dynamic camera scripting: 只调整需要的相机属性</li>
</ul>
<h4 id="dcamera-control">DCamera control</h4>
<ul>
<li>Third person scripting: 用专门的script objects去调整FOV、Focal
Length，filter or rendering effects, fog distance等</li>
<li>First person scripting: 有一些情况也需要对FP相机进行动态控制，比如
<ul>
<li>Traversing up or down ramps or other significantly sloped surfaces:
在上下坡的时候线相机要和坡度一致 <img
src="/images/realtime_cameras/6-6.png"
alt="根据玩家位置自动pitch。" /></li>
<li>Jumping: 在高距离跳跃时，能够对准落脚点的方向，但幅度不宜过大 <img
src="/images/realtime_cameras/6-7.png"
alt="玩家跳跃时自动pitch。" /></li>
<li>View locking: 锁定目标时相机要朝向目标点 <img
src="/images/realtime_cameras/6-8.png" alt="玩家锁定目标。" /></li>
</ul></li>
<li>Non-interactive movie scripting:
最常用的就是位置和朝向的scripting</li>
</ul>
<p>一些经验法则：</p>
<ul>
<li>Apply Occam's Razor: 使用最简单scripting方案，这便于随时修改</li>
<li>Allow for different ways that the camera event may be triggered:
比如有时候只用trigger volume可能不够</li>
<li>Allow previewing of camera motion and orientation: 支持预览</li>
<li>Assess camera scripting requirements early in the design
process</li>
<li>Make the scripting development cycle as efficient as possible:
提高预览和扩展能力</li>
<li>Mimic the behaviors of the tools used by artists where possible:
降低艺术家（设计师）的学习成本</li>
<li>Allow for game play changes: camera scripting system:
游戏玩法改变时能够轻松地修改camera</li>
</ul>
<h3 id="scripting-tools">Scripting Tools</h3>
<h4 id="world-editor-support">World editor support</h4>
<p>必须支持script objects的放置与操作，而且还要支持message passing,
state transition, event trigger和其他物体间的关系</p>
<h4
id="communication-between-target-platform-and-development-pc">Communication
between target platform and development PC</h4>
<p>要获得运行物体的状态</p>
<h4 id="messagingevent-logging">Messaging/event logging</h4>
<p>对消息和事件进行记录</p>
<h4 id="object-properties-debugging">Object properties debugging</h4>
<p>当游戏运行时要动态检查物体的属性</p>
<h4 id="replay">Replay</h4>
<p>最简单的方法是内置video recording</p>
<h4 id="console-window">Console window</h4>
<p>支持打印文本消息，通过GM指令查看想要的文本消息</p>
<h3 id="scripting-debugging">Scripting Debugging</h3>
<p>常见的debugging方法：</p>
<ul>
<li>Script statement execution/filter:
对任意给定的script，展示每个状态执行的历史记录</li>
<li>Debug message logging: 单独展示日志</li>
<li>Message filtering: 增加过滤功能以更好地debug</li>
<li>Object state: 展示物体的状态</li>
<li>FSM state changes: 展示当前的state和历史state</li>
<li>Animation state and event management:
记录当前的动画状态和插值状态，记录事件</li>
</ul>
<h1 id="part-3-camera-engineering">Part 3: Camera Engineering</h1>
<h2 id="chapter-7-position-and-orientation">Chapter 7: Position and
Orientation</h2>
<h3 id="coordinate-schemes">Coordinate Schemes</h3>
<p>有几种不同的坐标空间：</p>
<ul>
<li>World Space: 从世界空间到相机空间再到屏幕空间</li>
<li>Camera Space: 以相机为原点</li>
<li>Screen Space: Camera Space通过正交变换而来</li>
<li>Local Space: 以角色为原点</li>
<li>Object Relative: 相机为原点，三个轴根据某个物体到相机的位置而定</li>
</ul>
<h3 id="desired-position">Desired Position</h3>
<p>在相机移动的过程中需要关注与目标点的距离</p>
<h4 id="first-person-camera-positioning">First person camera
positioning</h4>
<p>大多数情况下，相机的desired
position就是角色眼睛的位置，此时增加一点dvertical
amping会有用。在玩家遇到崎岖地形或与物体碰撞时，需要smooth
out轻微的相机运动</p>
<h4 id="third-person-camera-positioning">Third person camera
positioning</h4>
<p>有三种策略决定相机位置：</p>
<ul>
<li>Automated: 相机完全自动化</li>
<li>Player control: 交由玩家操作相机，但要让环境始终保持在视野中</li>
<li>Hybrid: 交给玩家部分自主权</li>
</ul>
<h3 id="desired-position-determination-methods">Desired Position
Determination Methods</h3>
<p>相机位置应该独立于朝向，尽管后者常常依赖于前者。下面是一些决定desired
position的方法</p>
<h4 id="stationary">Stationary</h4>
<p>主要有两种stationary cameras: fixed position 和 dynamic fixed
position:</p>
<ul>
<li>Fixed position:
相机位置固定但可以自由调整朝向，通常限制了朝向的范围。但此类相机会使目标离相机太远或者丢失视野</li>
<li>Dynamic fixed position: 通常由其他活跃的相机决定，中间由jump
cut或interpolation决定</li>
</ul>
<h4 id="slavedtracking">Slaved/tracking</h4>
<p>相机的offset可以采取以下的几种形式：</p>
<ul>
<li>World-relative offset: 在世界坐标内保持相对距离 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vec3 desiredPosition = GetTargetObject()-&gt;GetPosition() + mOffset;</span><br></pre></td></tr></table></figure></li>
<li>World-relative angular offset: 在世界坐标中通过角度定义相对距离
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Vec3 <span class="title">offset</span>(<span class="params"><span class="number">0.0f</span>, cosf(pitch</span>) * distance, <span class="title">sinf</span>(<span class="params">pitch</span>) * distance)</span>;</span><br><span class="line"><span class="comment">// construct a rotation matrix around the world up-axis</span></span><br><span class="line">Mat3 rotation = Mat3::ZRotation(yaw);</span><br><span class="line">mOffset = rotation * offset;</span><br><span class="line">Vec3 desiredPosition = GetTargetObject()-&gt;GetPosition() + mOffset;</span><br></pre></td></tr></table></figure></li>
<li>World object relative:
根据主物体和另一个物体之间的距离决定相机位置，这种方法可以帮助处理人物在相机和另一物体中间的情况
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Mat3 rotation = Mat3::LookAt(GetTargetObject()-&gt;GetPosition().DropZ(), mWorldPosition.DropZ());</span><br><span class="line"><span class="comment">// note that the reference frame is often 2D, but is not required to be</span></span><br><span class="line">mOffset = rotation * offset;</span><br><span class="line">Vec3 desiredPosition = GetTargetObject()-&gt;GetPosition() + mOffset;</span><br></pre></td></tr></table></figure></li>
<li>Local offset: 与world relative
offset类似，只不过offset被转换到了局部空间 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Mat3 rotation = mScriptObject-&gt;GetMatrix(); <span class="comment">// based on the orientation of the script object</span></span><br><span class="line">mOffset = rotation * offset;</span><br><span class="line">Vec3 desiredPosition = GetTargetObject()-&gt;GetPosition() + mOffset;</span><br></pre></td></tr></table></figure></li>
<li>Local angualar offset: 类似world-relative angular
offset，不过offset被转换到了局部空间 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Vec3 <span class="title">offset</span>(<span class="params"><span class="number">0.0f</span>, cosf(pitch</span>) * distance, <span class="title">sinf</span>(<span class="params">pitch</span>) * distance)</span>;</span><br><span class="line">Mat3 rotation = mScriptObject-&gt;GetMatrix();</span><br><span class="line">mOffset = rotation * offset;</span><br><span class="line">Vec3 desiredPosition = GetTargetObject()-&gt;GetPosition() + mOffset;</span><br></pre></td></tr></table></figure></li>
<li>Character-relative offset:
在局部坐标内根据角色的朝向决定相机的位置，在三人称相机中最为常用，被称为“追背相机
(chase camera)”, 一般不会变化Roll</li>
<li>Character-relative angular offset:
在局部坐标内根据角色朝向和三个旋转角度、距离决定相机位置，通常会限制相机旋转速度的变化率</li>
<li>Object-relative offset:
不考虑目前物体的朝向，而仅考虑elevation和distance，the vector from the
target object toward the current camera position defines the coordinate
space used to calculate the desired position，相机的朝向通常由玩家操纵
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Mat3 rotation = Mat3::LookAt(GetPosition().DropZ(), GetTargetObject()-&gt;GetPosition().DropZ(), mWorldPosition);</span><br><span class="line"><span class="comment">// only elevation (here pitch) and distance are required</span></span><br><span class="line"><span class="function">Vec3 <span class="title">offset</span>(<span class="params"><span class="number">0.0f</span>, cosf(pitch</span>) * distance, <span class="title">sinf</span>(<span class="params">pitch</span>) * distance)</span>;</span><br><span class="line">mOffset = rotation * offset;</span><br><span class="line">Vec3 desiredPosition = GetTargetObject()-&gt;GetPosition() + mOffset;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="path">Path</h4>
<p>有几种不同类型的路径：</p>
<ul>
<li>Linear: 直线路径</li>
<li>Circular/elliptical/spiral: 环状路径 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X = a * cos(theta);</span><br><span class="line">Y = b * sin(theta);</span><br></pre></td></tr></table></figure></li>
<li>Spline: 通常一系列control points定义</li>
</ul>
<p>下面是决定路径位置的方法：</p>
<ul>
<li>Non-interactive situations: 在movie
sequences中通常由一个时间到位置的映射决定</li>
<li>The position of the player character relative to another object</li>
<li>Player position relative to a defined path</li>
<li>A specified distance away from the closest position on the path to
the player: 改方法需要注意相机移动的平滑性</li>
</ul>
<p><strong>Splines.</strong> 可以用brute
force的方法去计算spline的长度，代码如下 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">float</span> <span class="title">length</span>(<span class="params"><span class="number">0.0f</span></span>)</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; controlPoints.Size(); ++i)</span><br><span class="line">&#123;</span><br><span class="line">  Vec3 pathPosition = EvaluateSegment(i, <span class="number">0.0f</span>);</span><br><span class="line">  <span class="comment">// start of i&#x27;th segment</span></span><br><span class="line">  controlPoints[i].mLength = length;</span><br><span class="line">  <span class="comment">// save length at the control point</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">1</span>; i &lt; kMaxSegmentSlices; ++j)</span><br><span class="line">  <span class="comment">// includes next control point</span></span><br><span class="line">  &#123;</span><br><span class="line">    Vec3 newPosition = EvaluateSegment(i, j/kMaxSegmentSlices);</span><br><span class="line">    Vec3 delta = newPosition - pathPosition;</span><br><span class="line">    length += delta.Magnitude();</span><br><span class="line">    <span class="comment">// add the &quot;length&quot; of this slice</span></span><br><span class="line">    pathPosition = newPosition;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;   <span class="comment">// length now holds the approximate total length</span></span><br></pre></td></tr></table></figure></p>
<p>一种更快且准确的方法是用多项式逼近</p>
<p><strong>Mapping functions.</strong>
最简单的是从时间到长度的线性映射，此时相机的速度不变，导致abrupt开始或结束。一种常见的方法是使用一个二维spline曲线（Hermite
curves)，用户可以定义控制点和切线控制曲线的形状</p>
<h4 id="surface-constrained">Surface constrained</h4>
<p>在一些情况下，相机可能限制在一个隐式的平面上，比如一个flat平面，一个椭球、圆柱等等，该平面的大小和朝向可能是动态的</p>
<p>下面是一些常见的surface类型：</p>
<ul>
<li>Sphere: 容易受gimbal lock影响</li>
<li>Plane</li>
<li>Cylinder</li>
<li>Cone</li>
<li>Extruded spline plane</li>
<li>Spline cylinder</li>
</ul>
<h4 id="volume-constrained">Volume constrained</h4>
<p>相机与圆柱体的碰撞检测：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vec3 direction = currentPosition - cylinder.GetPosition();</span><br><span class="line">direction.SetZ(<span class="number">0.0f</span>);</span><br><span class="line"><span class="built_in">float</span> radius = direction.Magnitude();</span><br><span class="line"><span class="keyword">if</span> (radius &gt; kMaxRadius)</span><br><span class="line">  radius = kMaxRadius;</span><br><span class="line">direction = direction.AsNormalized() * radius;</span><br><span class="line">Vec3 newPosition = cylinder.GetPosition() + direction;</span><br><span class="line">newPosition.SetZ(currentPosition.GetZ());</span><br></pre></td></tr></table></figure>
<h4 id="framing">Framing</h4>
<p>该方法在屏幕空间上保持目标角色的位置，这可以通过移动相机、修改FOV、伸缩viewport等方法实现</p>
<h4 id="object-framing-relative">Object-framing relative</h4>
<p>该方法不仅考虑物体在屏幕空间中的小，而且也考虑它和另一个物体之间的相对距离，一些因素包括：</p>
<ul>
<li>Object screen size</li>
<li>Multiple objects must be kept on screen</li>
<li>Distance between objects</li>
<li>Relative position to other objects</li>
<li>Relative position to the screen (not rendered size)</li>
<li>Orientation with respect to the camera</li>
<li>Distance aiming/ranged weapons</li>
</ul>
<h4 id="axis-rotationalspindle">Axis rotational/spindle</h4>
<p>相机围绕游戏世界中的一个轴旋转、平移，适用于玩家需要围着一个物体导航的情况，或限制在一个圆柱物体的情况</p>
<p>一些影响相机位置的因素：</p>
<ul>
<li>Angular offset relative to the reference vector or the axis
origin</li>
<li>Axial offset relative to the current player positionn or the axis
origin</li>
<li>Radial offset relative to the spindle axis or current player
radius</li>
</ul>
<p>此外，我们也可以改变相机的朝向：</p>
<ul>
<li>Look at the spindle axis along a projected vector from the current
camera position</li>
<li>Look away from the spindle along a projected vector that passes
through the camera position as above</li>
<li>Apply an angular offset either toward or away from the spindle
relative to the target object</li>
</ul>
<p>玩家位置相对于spindle axis的半径可以作为mapping
function的输入，当玩家移动半径更小时，相机移动得更高</p>
<h3 id="common-position-problems">Common Position Problems</h3>
<ul>
<li>期望位置和一个物体碰撞，或者太近以至于物体穿透相机的近平面</li>
<li>期望位置离环境中的边界物体太近以至于有环境外的视野</li>
<li>期望位置离目标对象太远，玩家没有好的视野</li>
<li>环境复杂相机不能提供好的视野</li>
</ul>
<h3 id="orientation">Orientation</h3>
<p>旋转有四种表示方法：欧拉角、变换矩阵、轴角和四元数</p>
<h3 id="desired-orientation-determination-methods">Desired Orientation
Determination Methods</h3>
<h4 id="constant-orientation">Constant orientation</h4>
<p>朝向不变，但是位置可以移动。可以变式为constant elevation
cameras，即只有pitch可以改变</p>
<p>这种相机可以用在：</p>
<ul>
<li>Player controlled remote cameras</li>
<li>Dynamic positioning of replay cameras</li>
<li>Dynamic positioning of caemras for non-interactive game play
sequences</li>
</ul>
<h4 id="tracking-a-target-object-or-position">Tracking a target object
or position</h4>
<p>相机达到期望朝向的方法取决于目标物体的移动和相机的重朝向速度，此类相机一般保持固定的pitch</p>
<h4 id="look-at-offset">Look-at offset</h4>
<p>许多三人称游戏使用一个固定的look-at offset</p>
<h4 id="locked-look-at-position">Locked look-at position</h4>
<p>玩家的朝向也会随便改变</p>
<h4 id="target-object-position-prediction">Target object position
prediction</h4>
<h4 id="object-framing">Object framing</h4>
<p>一个很好的例子是格斗游戏，双方玩家都希望自己和对方都能呈现在屏幕上，当玩家距离增加的时候，相机要么拉远，要么增大FOV，但是频繁切换FOV通常不可取</p>
<p>回放相机通常会从不同的视角呈现玩家行为</p>
<h4 id="idle-wandering">Idle wandering</h4>
<p>A semi-random camera reorientation while the player character is
idle</p>
<h4 id="automated-orientation-control">Automated orientation
control</h4>
<p>在没有玩家操作的情况下自动帮助相机转向：</p>
<ul>
<li>Automated control over camera pitch when the player is jumping:
从玩家起跳时开始相机可以向下看</li>
<li>Automated pitch control when traversing environmental features: This
is applied to present a view facing up or down a ramp, staircase or
other incline as appropriate so that players have a better view of what
they are moving toward,
在有洞穴或悬崖的地方，相机应该自动看向以给予提示</li>
<li>Automated pitch control during combat or interactions:
自动调整pitch以提示可交互的物体</li>
<li>Automated reorientation of the player or a camera toward a target
position: 锁定到目标物体</li>
<li>Repositioning and reorientation of the camera to face the same
direction as the player character</li>
<li>Transitions from first to third person cameras:
要保证当相机移动地充分远的时候才渲染物体，避免穿帮，此时可通过fade角色解决此问题</li>
<li>Transitions from third to first person cameras: 可通过cut
transition实现</li>
</ul>
<h3 id="reorientation-methods">Reorientation Methods</h3>
<h4 id="applying-rotations">Applying rotations</h4>
<p>有几种方法去应用旋转：</p>
<ul>
<li>Constant angular velocity:
匀速变动旋转角，但是开始和结束会有突变</li>
<li>Acceleration and deceleration: 应用加速度与减速度</li>
<li>Angular velocity damping: 用damp使开始结尾更皮规划</li>
<li>Free-look damping: 用bump和其他的ease
functions防止因noise导致的相机朝向变动</li>
<li>Twist reduction</li>
</ul>
<h4 id="reorientation-lag">Reorientation lag</h4>
<p>通常我们希望相机朝向的变化能有一些延迟（lag），同时保持平滑</p>
<p>很多游戏没有任何延迟，这有两个影响：第一，相机直接看向角色会导致玩家不能提前看见角色的移动，第二，相机非常依赖角色的移动，任何小的扰动就会影响相机表现</p>
<p>因此需要使小的移动没有影响，并且使用damp。当插值的时候，可以限制每帧允许的旋转角度。此外，lag还可以通过用springs或feedback
controller实现</p>
<h4 id="offsets">Offsets</h4>
<p>一个常被忽略的点是look-at position和target
object之间的关系。如果直接看向角色，那么就容易丢失玩家想要看的东西。可以用一些视觉提示帮助玩家瞄准目标对象，比如highlight敌人，或者lock-on
to the target object</p>
<h4 id="smoothing-and-damping">Smoothing and damping</h4>
<p>常用的平滑方法是limit the angular velocity of the camera
proportionally to the angle between the current and desired
orientations，这可以表示为一个简单的三角函数：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Real32 <span class="keyword">const</span> <span class="title">kDampingAngle</span>(<span class="params"><span class="number">30.0f</span> * gkRadiansPerDegree</span>)</span>;</span><br><span class="line">Real32 angle = acosf(CVector3f::Dot(currentOrientation, desiredOrientation));</span><br><span class="line">Real32 <span class="keyword">const</span> kDampingFactor = Cmath::Limit(angle / kDampingAngle, <span class="number">1.0f</span>); <span class="comment">// linearly proportional</span></span><br><span class="line">Real32 angularLimit = angularSpeed * deltaTime * kDampingFactor;</span><br><span class="line">CQuaternion newOrientation = CQuaternion::LookAt(currentOrientation, desiredOrientation, angularLimit);</span><br></pre></td></tr></table></figure>
<p>始终记住我们有两个矛盾的要求：平滑移动和保持角色合理视角</p>
<h4 id="springs-and-pid-controllers">Springs and PID controllers</h4>
<p>In practice, tuning the characteristics of the controller to achieve
this behavior can be time-consuming but very worthwhile</p>
<h3 id="free-look">Free-Look</h3>
<h4 id="first-person-free-look">First person free-look</h4>
<p>很多一人称游戏采用circle
strafing技术允许玩家free-look，有些游戏也只允许垂直方向的朝向变化，当然也要限制最大角度</p>
<h4 id="third-person-free-look">Third person free-look</h4>
<p>用一个圆锥体围绕look-at点，并使用一个弹簧在没有输入指令的时候令相机能够回到初始位置</p>
<h4 id="free-look-orientation-determination">Free-look orientation
determination</h4>
<p>决定free-look朝向通常有两种方法：self-centering和non-centering</p>
<ul>
<li>Self-centering free-look:
玩家输入会让相机朝向改变，通常把遥感值映射为相机朝向的速度</li>
<li>Non-centering free-look: 在没有玩家输入时相机会保持现在的朝向</li>
</ul>
<h4 id="common-orientation-problems">Common orientation problems</h4>
<p>一些常见的相机朝向的问题：</p>
<ul>
<li>Gimbal lock: 当相机forward与世界up
axis平行时发生，要么不让相机平行于up axis，要么用四元数构造变换矩阵</li>
<li>Vertical twist: 当使用三人称相机时，如果相机朝向接近平行于up
axis则会出现这个问题，表现为相机快速围绕up
axis旋转，常发生于相机在墙角的情况，此时可以限制相机围绕up
axis的旋转速度，或者禁止相机朝向改变直到相机离玩家足够远</li>
<li>Roll: 飞行模拟游戏会经常使用roll</li>
<li>Orientation noise: 使用high-pass filter移除不想要的朝向变化</li>
<li>Rapid orientation changes:
当允许玩家快速移动/改变朝向，或玩家在相机下方或上方移动时，相机的朝向就会快速改变，带给玩家糟糕的体验</li>
<li>Frustum culling of the player character:
三人称游戏必须首先考虑frame玩家，切通常相机直接看向玩家前进的方向，但也要让玩家保持在view
frustum中</li>
</ul>
<h2 id="chapter-8-navigation-and-occulusion">Chapter 8: Navigation and
Occulusion</h2>
<h2 id="chapter-9-motion-and-collision">Chapter 9: Motion and
Collision</h2>
<h2 id="chapter-10-camera-mathematics">Chapter 10: Camera
Mathematics</h2>
<h2 id="chapter-11-implementation">Chapter 11: Implementation</h2>

    </div>

    
    
    
      


    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>原作者： </strong>Sulley
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://sulley.cc/2022/05/05/%E3%80%8AReal-Time%20Cameras%E3%80%8B%E7%AC%94%E8%AE%B0/" title="《Real-Time Cameras》笔记">http://sulley.cc/2022/05/05/《Real-Time Cameras》笔记/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag"># 随笔</a>
              <a href="/tags/%E6%B8%B8%E6%88%8F/" rel="tag"># 游戏</a>
              <a href="/tags/%E7%9B%B8%E6%9C%BA/" rel="tag"># 相机</a>
              <a href="/tags/%E8%AE%BE%E8%AE%A1/" rel="tag"># 设计</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/27/Motion%20Matching%20-%20%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%8F%91%E5%B1%95/" rel="prev" title="Motion Matching -- 概念与发展">
                  <i class="fa fa-chevron-left"></i> Motion Matching -- 概念与发展
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sulley</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">141k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:08</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.7/pdfobject.min.js","integrity":"sha256-ph3Dk89VmuTVXG6x/RDzk53SU9LPdAh1tpv0UvnDZ2I="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>


  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"littlesulley","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
